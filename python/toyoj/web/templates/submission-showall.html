{# vim: se ft=jinja.html sw=2 ts=2 sts=2: #}
{% extends "base.html" %}
{% from 'utility.html' import time_tag, time_duration, memory_size %}

{% block title %}Submissions - {{ super() }}{% endblock %}

{% block h2 %}Submissions{% endblock %}

{% macro verdict_of(s) %}
{% if s.verdict is not none %}
{{ s.verdict }} on test {{ s.verdict_apparent_id }}{##}
{% elif s.results_count != s.testcases_count %}
Judging&hellip; {{ s.results_count or 0 }} / {{ s.testcases_count }}{##}
{% else %}
AC{##}
{% endif %}
{% endmacro %}

{% block content %}
<table>
  <tr>
    <th>ID</th>
    <th>Problem</th>
    <th>Submitter</th>
    <th>Verdict</th>
    <th>Time</th>
    <th>Memory</th>
    <th>Language</th>
    <th>Submit Time</th>
    <th>Judge Time</th>
  </tr>
  {% for s in submissions %}
  <tr>
    <td><a href="{{ url_for('submission.show', submission_id = s.id) }}">{{ s.id }}</a></td>
    <td><a href="{# url_for('problem', problem_id = s.problem_id) #}">{{ s.problem_title }}</a></td>
    <td><a href="{{ url_for('user.show', user_id = s.submitter_id) }}">{{ s.submitter_username }}</a></td>
    <td>{{ verdict_of(s) }}</td>
    <td>{{ time_duration(s.time) }}</td>
    <td>{{ memory_size(s.memory) }}</td>
    <td>{{ s.language_name }}</td>
    <td>{{ time_tag(s.submit_time) }}</td>
    <td>{{ time_tag(s.judge_time) }}</td>
  </tr>
  {% endfor %}
</table>
{% endblock content %}
