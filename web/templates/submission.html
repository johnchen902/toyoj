{# vim: se ft=html.twig sw=2 ts=2 sts=2: #}
{% extends "base.html" %}
{% set s = submission %}
{% block title %}Submissions #{{s.id}} - {{ parent() }}{% endblock %}

{% block h2 %}Submission #{{s.id}}{% endblock %}

{% block content %}
  <h3>General</h3>
  <table>
    <tr>
      <th>Problem</th>
      <th>Submitter</th>
      <th>Accepted</th>
      <th>Score</th>
      <th>Time</th>
      <th>Memory</th>
      <th>Submit Time</th>
      <th>Judge Time</th>
    </tr>
    <tr>
      <td><a href="{{ path_for('problem', { 'pid': s.problem_id }) }}">{{ s.problem_title }}</a></td>
      <td><a href="{{ path_for('user', {'uid': s.submitter_id }) }}">{{ s.submitter_username }}</a></td>
      <td>{% if not s.accepted is null %}{{ s.accepted ? "Yes" : (s.rejected ? "No" : "Unsure") }}{% endif %}</td>
      <td>{% if not s.fullscore is null %}{% if s.minscore == s.maxscore %}{{ s.minscore }}{% else %}({{ s.minscore }} &ndash; {{s.maxscore}}){% endif %} / {{ s.fullscore }}{% endif %}</td>
      <td>{% if not s.time is null %}{{ s.time }} ms {% endif %}</td>
      <td>{% if not s.memory is null %}{{ s.memory }} KiB{% endif %}</td>
      <td><time datetime="{{ s.submit_time|date('c') }}">{{ s.submit_time|date('Y-m-d H:i:s') }}</time></td>
      <td>{% if not s.judge_time is null %}<time datetime="{{ s.judge_time|date('c') }}">{{ s.judge_time|date('Y-m-d H:i:s') }}</time>{% endif %}</td>
    </tr>
  </table>
  <h3>Source Code</h3>
  Language: {{ s.language_name }}
  <pre><code>{{ s.code }}</code></pre>
  <h3>Subtasks</h3>
  <table>
    <tr>
      <th>ID</th>
      <th>Accepted</th>
      <th>Score</th>
      <th>Time</th>
      <th>Memory</th>
      <th>Judge Time</th>
    </tr>
{% for st in s.subtasks %}
    <tr>
      <td>{{ st.subtask_id }}</td>
      <td>{% if not st.accepted is null %}{{ st.accepted ? "Yes" : (st.rejected ? "No" : "Unsure") }}{% endif %}</td>
      <td>{% if st.minscore == st.maxscore %}{{ st.minscore }}{% else %}({{ st.minscore }} &ndash; {{st.maxscore}}){% endif %} / {{ st.fullscore }}</td>
      <td>{% if not s.time is null %}{{ s.time }} ms {% endif %}</td>
      <td>{% if not s.memory is null %}{{ s.memory }} KiB{% endif %}</td>
      <td>{% if not s.judge_time is null %}<time datetime="{{ s.judge_time|date('c') }}">{{ s.judge_time|date('Y-m-d H:i:s') }}</time>{% endif %}</td>
    </tr>
{% endfor %}
  </table>
  <h3>Test Cases</h3>
  <table>
    <tr>
      <th>ID</th>
      <th>Accepted</th>
      <th>Verdict</th>
      <th>Time</th>
      <th>Memory</th>
      <th>Judge</th>
      <th>Judge Time</th>
    </tr>
{% for tc in s.testcases %}
    <tr>
      <td><a href="{{ path_for('test', { 'pid': s.problem_id, 'testid': tc.testcase_id }) }}">{{ tc.testcase_id }}</a></td>
      <td>{{ tc.accepted is null ? "" : (tc.accepted ? "Yes" : "No") }}</td>
      <td>{{ tc.verdict }}</td>
      <td>{% if not tc.time is null %}{{ tc.time }} ms {% endif %}</td>
      <td>{% if not tc.memory is null %}{{ tc.memory }} KiB{% endif %}</td>
      <td>{{ tc.judge_name }}</td>
      <td>{% if not tc.judge_time is null %}<time datetime="{{ tc.judge_time|date('c') }}">{{ tc.judge_time|date('Y-m-d H:i:s') }}</time>{% endif %}</td>
    </tr>
{% endfor %}
  </table>
{% endblock content %}
